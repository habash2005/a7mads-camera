import{r as c,j as e,a as u,c as h,d as g,s as p}from"./index-DHNDQWmV.js";async function y(s){const l=new TextEncoder().encode(s),t=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}function b(){const[s,l]=c.useState(""),[t,r]=c.useState(""),[n,d]=c.useState(""),[i,o]=c.useState(""),x=async()=>{if(!s||!t||!n){o("Fill all fields");return}o("Saving…");try{const a=await y(n.trim()),m=`gal-${t.trim().toLowerCase()}`;await u(h(g,"galleries"),{name:s,slug:t.trim().toLowerCase(),tag:m,codeHash:a,createdAt:p()}),o("✅ Gallery saved. Upload photos to Cloudinary with tag: "+m),l(""),r(""),d("")}catch(a){console.error(a),o("❌ Error saving gallery")}};return e.jsx("section",{className:"w-full py-16 md:py-24 bg-ivory",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-serif font-semibold text-charcoal",children:"Create Client Gallery"}),e.jsxs("div",{className:"mt-6 grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-charcoal",children:"Gallery name"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-rose/30 px-3 py-2 bg-white",value:s,onChange:a=>l(a.target.value),placeholder:"e.g., Aliyah + Sam – Engagement"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-charcoal",children:"Slug (letters/numbers only)"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-rose/30 px-3 py-2 bg-white",value:t,onChange:a=>r(a.target.value.replace(/[^a-z0-9-]/gi,"")),placeholder:"e.g., aliyah-sam"}),e.jsxs("div",{className:"text-xs text-charcoal/60 mt-1",children:["Uploads will use Cloudinary tag: ",e.jsxs("code",{children:["gal-",t||"your-slug"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-charcoal",children:"Access code (what you send to client)"}),e.jsx("input",{className:"mt-1 w-full rounded-xl border border-rose/30 px-3 py-2 bg-white",value:n,onChange:a=>d(a.target.value),placeholder:"e.g., 842615"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:x,className:"rounded-full px-5 py-3 text-sm font-semibold bg-rose text-ivory hover:bg-gold hover:text-charcoal transition-all shadow-md",children:"Save Gallery"})}),i&&e.jsx("div",{className:"text-sm text-charcoal mt-2",children:i})]})]})})}export{b as default};
